# Проектная работа "Веб-ларек"  
  
Web-ларёк — это интернет-магазин с товарами для веб-разработчиков. В нём можно посмотреть каталог товаров, добавить товары в корзину и сделать заказ.   
  
# Описание  

Архитектура приложения разрабатывается с использованием паттерна MVP, в котором основными слоями являются:
- View - классы, отвечающие за отображение данных на экране.    
- Model - классы, отвечающие за работу с данными.  
- Presenter - код презентера не будет выделен в отдельный класс, а будет содержаться в основном скрипте приложения (src/index.ts).  
   
    
## Список обытий:  
- ### Событие на изменение данных:  
- измененние списка продуктов (в корзине, например): product:change.  
- изменение данных пользователя (при оформлении заказа) form:change.   
- ### Событие на действия пользователя 
- выбор товара: product:select.  
- выбор корзины: basket:select.  
- нажатие на кнопку: button:submit.    
  
# Используемый стек  
  
Стек: HTML, SCSS, TS, Webpack  
  
Структура проекта:  
- src/ — исходные файлы проекта  
- src/components/ — папка с JS компонентами  
- src/components/base/ — папка с базовым кодом  
  
Важные файлы:  
- src/pages/index.html — HTML-файл главной страницы  
- src/types/index.ts — файл с типами  
- src/index.ts — точка входа приложения  
- src/scss/styles.scss — корневой файл стилей  
- src/utils/constants.ts — файл с константами  
- src/utils/utils.ts — файл с утилитами  
  
## Установка и запуск  
Для установки и запуска проекта необходимо выполнить команды  
  
```  
npm install  
npm run start  
```  
  
или  
  
```  
yarn  
yarn start  
```  
## Сборка  
  
```  
npm run build  
```  
  
или  
  
```  
yarn build  
```  
# Описание базовых классов, их предназначение и функции    

### Класс Api имеет следующие свойства и методы.  
  
Методы:  
  
- handleResponse(response: Response): Promise<object> - обработчик ответа сервера.  
- get(uri: string) - принимает изменяющеюся часть url-адреса, возвращает ответ от сервера.  
- post(uri: string, data: object, method: ApiPostMethods = 'POST') - принимает изменяющеюся часть url-адреса, принимает данные в виде объекта для отправки на сервер, type ApiPostMethods = 'POST' | 'PUT' | 'DELETE'.  
    
    
### Класс EventEmitter - брокер событий, implements от IEvents и имеет следующие методы
  
Класс EventEmitter реализует паттерн «Observer/Наблюдатель» и обеспечивает работу событий, его методы позволяют устанавливать и снимать слушатели событий, вызвать слушатели при возникновении события.  
  
Методы:  
  
- on - для подписки на событие.  
- off - для отписки от события.  
- emit - уведомления подписчиков о наступлении события соответственно.  
- onAll - для подписки на все события.  
- offAll - сброса всех подписчиков.  
- trigger - генерирует заданное событие с заданными аргументами. Это позволяет передавать его в качестве обработчика события в другие классы. Эти классы будут генерировать события, не будучи при этом напрямую зависимыми от класса EventEmitter.  
  
## Модели данных.   
  
### Класс LarekModel принимает и хранит данные продуктов полученные с сервера.  
  
Метод:  
   
- openModal - открывает попап карточки.  
- openBasket - открывает корзину.   
   
### Класс BasketModel хранит и работает с данными полученными от пользователя.  
  
Методы:
  
- addProduct - добавляет товар в корзину.
- deleteProduct - удаляет товар из корзины.
- getFinalSumm - считает сумму всех товаров в корзине
   
 
### Класс OrderModel управляет формой заказа.  
  
Методы:  
  
- setWayOfPayment - позволяет выбирать способ оплаты.  
- validateWayOfPayment - проверяет выбранный способ оплаты
- setAddress - принимает/сохраняет адрес пользователя.  
- validateAddress - проверяет адрес пользователя.  
- setEmailAndTelephone - принимает/сохраняет номер телефона и почту пользователя.  
- validateEmailAndTelephone - проверяет номер телефона и почту пользователя.  
- getReadyOrder - возвращает данные пользователя необходимы для оформления заказа.  
  
### Класс ILarekAPIModel наследуется от класса Api, передаёт и получает данные от сервера.  
  
Методы:  
  
- getProductItems - получаем массив карточек с сервера.  
- postOrderLot - отправляем запрос на сервер для формирования заказа.  
  
  
## Компоненты представления.  

### Класс BasketView управляет отображением корзины.  
  
Методы:  
  
- SumOfAllProducts - устанавливает сумму всех товаров в корзине.  
- render - отображает корзину.
  
### Класс BasketItemView управляет отображением элементов(продуктов) в корзине.  
  
Метод:  
  
- render - отображает все товары.  
  
### Класс CardCatalogView управляет отображением карточки товара на веб странице.  
 
Методы:  
  
- setText - устанавлявает текстовый элемент в карточке товара.  
- setPrice - устанавливает цену товра.     
- setCategory - устанавливает категорию товара.  
- render - отображает список карточек.  
  
### Класс CardPreviewView наследуется от класса CardCatalogView и управляет отображением подробного описания карточки товара в превью, позволяет добавить карточку в корзину.  
  
Метод:  
  
- render - отображает карточку.   
  
### Класс OrderViewFirtsStep управляет отображением содержимого модального окна и позволяет принять от пользователя метод оплаты и адрес.  
  
Метод:  
  
- choosePaymentMethod - выбирает метод оплаты.   
- enterAddress - позволяет ввести адрес.  
- toggleNextButton - позволяет перейти к следующему шагу оформления заказа.  
- render - отображает окно заказа.  
   
### Класс OrderViewSecondStep управляет отображением содержимого модального окна и позволяет принять от пользователя его контактные данные.  
  
Метод:  
    
- enterEmail - позволяет ввести почту.  
- enterPhoneNumber - позволяет ввести номер телефона.  
- togglePayButton - позволяет перейти к шагу оплаты заказа.  
- render - отображает окно заказа.  
   
### Класс ModalView управляет отображением модальных окон и наследуется от класса Component.  
  
Методы:  
  
- open - отображает модальное окон.  
- close - закрывает модальное окно. 
- render - отображает модальное окно.   
  
### Класс Success управляет отображением успешного заказа в модальном окне.  
  
Методы:  
  
- render - отображает модальное окно.   
  